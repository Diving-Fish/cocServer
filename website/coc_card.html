<!DOCTYPE html>
<html style="background: #e0e0e0;">
<head>
  <meta charset="UTF-8">
  <!-- import CSS -->
  <link rel="stylesheet" href="https://unpkg.zhimg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body style="width: 60%; margin: 20px auto; padding: 20px 60px 20px 20px; background: #ffffff;">
  <div id="app">
    <h1>Call of Cthulhu - Card Maker</h1>
    <el-form ref="form" label-width="120px">
      <el-form-item label="时代背景">
        <el-select v-model="form.era">
          <el-option v-for="era in era_list" :key="era.value" :value="era.value" :label="era.label"/>
        </el-select>
      </el-form-item>
      <h2>Basics</h2>
      <el-row>
        <el-col :offset="1" :span="19">
          <el-form-item label-width="auto" label="自定义属性（勾选后可以自行调整属性）">
            <el-checkbox v-model="form.diy_stat" />
          </el-form-item>
        </el-col>
        <el-col :offset="1" :span="3">
          <el-button @click="roll_stat">Roll stat</el-button>
        </el-col>
      </el-row>
      <el-row>
        <el-col v-for="i in [0, 1, 2, 3]" :span="6">
          <el-form-item :label="stat_label[i]">
            <el-input v-model="form.stat[i]" type="number" :disabled="!form.diy_stat"></el-input>
          </el-form-item>
        </el-col>
      </el-row>
      <el-row>
        <el-col v-for="i in [4, 5, 6, 7]" :span="6">
          <el-form-item :label="stat_label[i]">
            <el-input v-model="form.stat[i]" type="number" :disabled="!form.diy_stat"></el-input>
          </el-form-item>
        </el-col>
      </el-row>
      <el-row>
        <el-col :span="18">
          <el-form-item label="八大属性总和">
            <a>{{ sum(stat) }}</a>
          </el-form-item>
        </el-col>
        <el-col :span="6">
          <el-form-item :label="stat_label[8]">
            <el-input v-model="form.stat[8]" type="number" :disabled="true"></el-input>
          </el-form-item>
        </el-col>
      </el-row>
      <el-row>
        <el-col :span="12">
          <el-form-item label="*姓名">
            <el-input v-model="form.name"></el-input>
          </el-form-item>
        </el-col>
        <el-col :span="12">
          <el-form-item label="*玩家">
            <el-input v-model="form.player_name"></el-input>
          </el-form-item>
        </el-col>
      </el-row>
      <el-row>
        <el-col :span="12">
          <el-form-item label="*职业">
            <el-select filterable placeholder="可输入进行搜索" v-model="form.career" style="width: 100%;">
              <el-option v-for="career in career_list" :key="career.id" :value="career.id" :label="career.label"/>
            </el-select>
          </el-form-item>
        </el-col>
        <el-col :span="6">
          <el-form-item label="*年龄">
            <el-input type="number" v-model="form.age"></el-input>
          </el-form-item>
        </el-col>
        <el-col :span="6">
          <el-form-item label="*性别">
            <el-select v-model="form.gender">
              <el-option v-for="gender in gender_list" :key="gender.value" :value="gender.value" :label="gender.label"/>
            </el-select>
          </el-form-item>
        </el-col>
      </el-row>
      <el-row>
        <el-col :span="12">
          <el-form-item label="*住地">
            <el-input v-model="form.address"></el-input>
          </el-form-item>
        </el-col>
        <el-col :span="12">
          <el-form-item label="*出身">
            <el-input v-model="form.from"></el-input>
          </el-form-item>
        </el-col>
      </el-row>
      <el-row>
        <el-col :span="9">
          <el-form-item label="属性减益：">
            <a>{{ debuff_text[age_level] }}</a>
          </el-form-item>
        </el-col>
        <div v-if="form.age >= 40">
          <el-col :span="5">
            <el-form-item label="*力量">
              <el-input v-model="debuff.str"></el-input>
            </el-form-item>
          </el-col>
          <el-col :span="5">
            <el-form-item label="*敏捷">
              <el-input v-model="debuff.dex"></el-input>
            </el-form-item>
          </el-col>
          <el-col :span="5">
            <el-form-item label="*体质">
              <el-input v-model="debuff.con"></el-input>
            </el-form-item>
          </el-col>
        </div>
        <div v-if="form.age < 20">
          <el-col :span="7" :offset="1">
            <el-form-item label="*力量">
              <el-input v-model="debuff.str"></el-input>
            </el-form-item>
          </el-col>
          <el-col :span="7">
            <el-form-item label="*体型">
              <el-input v-model="debuff.siz"></el-input>
            </el-form-item>
          </el-col>
        </div>
      </el-row>
      <h2>Final Ability</h2>
      <el-table :data="table_data" style="width: 100%">
        <el-table-column prop="str" label="力量"></el-table-column>
        <el-table-column prop="con" label="体质"></el-table-column>
        <el-table-column prop="siz" label="体型"></el-table-column>
        <el-table-column prop="dex" label="敏捷"></el-table-column>
        <el-table-column prop="app" label="外貌"></el-table-column>
        <el-table-column prop="edu" label="教育"></el-table-column>
        <el-table-column prop="int" label="智力"></el-table-column>
        <el-table-column prop="pow" label="意志"></el-table-column>
        <el-table-column prop="luck" label="幸运"></el-table-column>
        <el-table-column prop="hp" label="HP"></el-table-column>
        <el-table-column prop="mp" label="MP"></el-table-column>
        <el-table-column prop="mov" label="移动"></el-table-column>
        <el-table-column prop="tg" label="体格"></el-table-column>
        <el-table-column prop="san" label="Sanity"></el-table-column>
      </el-table>
      <h2>Skill Points</h2>
      <p style="color: #606266">剩余职业点数：{{ get_skill_point() - sum(career_points) }}</p>
      <p style="color: #606266">剩余兴趣点数：{{ stat[6] * 2 - sum(interest_points) }}</p>
      <p style="color: #606266">本职技能：{{ career_list[form.career - 1].skills }}</p>
      <p style="color: #606266">CR：{{ career_list[form.career - 1].min_cr }}~{{ career_list[form.career - 1].max_cr }}</p>
      <el-row style="color: #606266; border-bottom: solid #606266 1px; padding: 0px 40px 10px 40px;">
        <el-col :span="6">
          技能名称
        </el-col>
        <el-col :span="4">
          初始
        </el-col>
        <el-col :span="4">
          职业
        </el-col>
        <el-col :span="4">
          兴趣
        </el-col>
        <el-col :span="6">
          总计（成功率）
        </el-col>
      </el-row>
      <el-row style="color: #606266; line-height: 30px; padding: 5px 40px 0px 40px;" v-for="skill in skills">
        <el-col :span="6">
          {{ skill.label == "信用评级" ? "*" : ""}}{{ skill.label }}
        </el-col>
        <el-col :span="4">
          {{ skill.basic }}
        </el-col>
        <el-col :span="4">
          <a v-if="skill.label == '恶名值'">-</a>
          <el-input v-if="skill.label != '恶名值'" style="width: 80%;" size="small" type="number" v-model="career_points[skill_list.indexOf(skill)]"></el-input>
        </el-col>
        <el-col :span="4">
          <a v-if="skill.label == '恶名值' || skill.label == '信用评级'">-</a>
          <el-input v-if="skill.label != '信用评级' && skill.label != '恶名值'" style="width: 80%;" size="small" type="number" v-model="interest_points[skill_list.indexOf(skill)]"></el-input>
        </el-col>
        <el-col :span="6">
          {{ skill.sum }} / {{ Math.floor(skill.sum / 2) }} / {{ Math.floor(skill.sum / 5) }}
        </el-col>
      </el-row>
      <el-row style="color: #606266; line-height: 30px; padding: 5px 40px 0px 40px;">
        <el-col :span="3">
          *语言(母语):
        </el-col>
        <el-col :span="3">
          <el-input style="width: 80%;" size="small" v-model="form.lang[0].label"></el-input>
        </el-col>
        <el-col :span="4">
          {{ stat[5] }}
        </el-col>
        <el-col :span="4">
          <el-input style="width: 80%;" size="small" type="number" v-model="form.lang[0].career"></el-input>
        </el-col>
        <el-col :span="4">
          <el-input style="width: 80%;" size="small" type="number" v-model="form.lang[0].interest"></el-input>
        </el-col>
        <el-col :span="6">
          {{ parseInt(form.lang[0].career) + parseInt(form.lang[0].interest) + stat[5] }} / {{ Math.floor((parseInt(form.lang[0].career) + parseInt(form.lang[0].interest) + stat[5]) / 2) }} / {{ Math.floor((parseInt(form.lang[0].career) + parseInt(form.lang[0].interest) + stat[5]) / 5) }}
        </el-col>
      </el-row>
      <el-row style="color: #606266; line-height: 30px; padding: 5px 40px 0px 40px;" v-for="i in [1, 2, 3]">
        <el-col :span="3">
          语言:
        </el-col>
        <el-col :span="3">
          <el-input style="width: 80%;" size="small" v-model="form.lang[i].label"></el-input>
        </el-col>
        <el-col :span="4">
          1
        </el-col>
        <el-col :span="4">
          <el-input style="width: 80%;" size="small" type="number" v-model="form.lang[i].career"></el-input>
        </el-col>
        <el-col :span="4">
          <el-input style="width: 80%;" size="small" type="number" v-model="form.lang[i].interest"></el-input>
        </el-col>
        <el-col :span="6">
          {{ parseInt(form.lang[i].career) + parseInt(form.lang[i].interest) + 1 }} / {{ Math.floor((parseInt(form.lang[i].career) + parseInt(form.lang[i].interest) + 1) / 2) }} / {{ Math.floor((parseInt(form.lang[i].career) + parseInt(form.lang[i].interest) + 1) / 5) }}
        </el-col>
      </el-row>
      <h2>Background</h2>
      <el-form-item label="*形象描述">
        <el-input v-model="form.bg[0]"></el-input>
      </el-form-item>
      <el-form-item label="*思想与信念">
        <el-input v-model="form.bg[1]"></el-input>
      </el-form-item>
      <el-form-item label="*重要之人">
        <el-input v-model="form.bg[2]"></el-input>
      </el-form-item>
      <el-form-item label="*意义非凡之地">
        <el-input v-model="form.bg[3]"></el-input>
      </el-form-item>
      <el-form-item label="*宝贵之物">
        <el-input v-model="form.bg[4]"></el-input>
      </el-form-item>
      <el-form-item label="*特质">
        <el-input v-model="form.bg[5]"></el-input>
      </el-form-item>
      <el-form-item label="伤口和疤痕">
        <el-input v-model="form.bg[6]"></el-input>
      </el-form-item>
      <el-form-item label="恐惧症和狂躁症">
        <el-input v-model="form.bg[7]"></el-input>
      </el-form-item>
      <h2>Items</h2>
      <el-input style="margin-bottom: 22px;" v-model="form.item[0]"></el-input>
      <el-input style="margin-bottom: 22px;" v-model="form.item[1]"></el-input>
      <el-input style="margin-bottom: 22px;" v-model="form.item[2]"></el-input>
      <el-input style="margin-bottom: 22px;" v-model="form.item[3]"></el-input>
      <el-input style="margin-bottom: 22px;" v-model="form.item[4]"></el-input>
      <el-input style="margin-bottom: 22px;" v-model="form.item[5]"></el-input>
      <el-input style="margin-bottom: 22px;" v-model="form.item[6]"></el-input>
      <el-input style="margin-bottom: 22px;" v-model="form.item[7]"></el-input>
    </el-form>
    <el-button @click="commit" type="primary">提交到服务器</el-button>
    
  </div>
  <p style="color: #666666; font-size: 14px; border-top: solid 1px #666666; padding-top: 20px;">Powered by Diving_Fish. All rights reserved.</p>
</body>
  <!-- import Vue before Element -->
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <!-- import JavaScript -->
  <script src="https://unpkg.com/element-ui/lib/index.js"></script>
  <script>
    var v = new Vue({
      el: '#app',
      computed: {
        stat: function() {
          let stat = [];
          for (var i = 0; i < 8; i++) {
            let debuff = 0;
            if (i == 0) {
              debuff = parseInt(this.debuff.str);
            } else if (i == 1) {
              debuff = parseInt(this.debuff.con);
            } else if (i == 2) {
              debuff = parseInt(this.debuff.siz);
            } else if (i == 3) {
              debuff = parseInt(this.debuff.dex);
            } else if (i == 4 && this.age_level >= 2) {
              debuff = 5 * (this.age_level - 1);
            } else if (i == 5 && this.age_level == 0) {
              debuff = 5;
            }
            stat.push(parseInt(this.form.stat[i]) - debuff);
          }
          this.form.stat.push(0);
          this.form.stat.pop();
          return stat;
        },
        table_data: function() {
          let _data = this.stat;
          let data = {};
          let dmg = _data[0] + _data[2];
          if (dmg <= 64) {
            data.tg = -2;
          } else if (dmg <= 84) {
            data.tg = -1;
          } else if (dmg <= 124) {
            data.tg = 0;
          } else if (dmg <= 164) {
            data.tg = 1;
          } else if (dmg <= 204) {
            data.tg = 2;
          } else if (dmg <= 284) {
            data.tg = 3;
          } else if (dmg <= 364) {
            data.tg = 4;
          } else if (dmg <= 444) {
            data.tg = 5;
          } else if (dmg <= 524) {
            data.tg = 6;
          }
          data.hp = Math.floor((_data[1] + _data[2]) / 10);
          if (_data[0] < _data[2] && _data[3] < _data[2]) {
            data.mov = 7;
          } else if (_data[0] > _data[2] && _data[3] > _data[2]) {
            data.mov = 9;
          } else {
            data.mov = 8;
          }
          if (this.age_level >= 2) {
            data.mov -= this.age_level - 1;
          }
          data.mp = Math.floor(this.stat[7] / 5);
          data.str = _data[0];
          data.con = _data[1];
          data.siz = _data[2];
          data.dex = _data[3];
          data.app = _data[4];
          data.edu = _data[5];
          data.int = _data[6];
          data.pow = _data[7];
          data.luck = this.form.stat[8];
          data.san = data.pow;
          return [data];
        },
        skills: function() {
          let l = this.skill_list;
          for (let i = 0; i < l.length; i++) {
            l[i].sum = l[i].basic + parseInt(this.career_points[i]) + parseInt(this.interest_points[i]);
          }
          return l;
        },
        age_level: function() {
          let age = this.form.age;
          if (age < 20) {
            return 0;
          } else if (age < 40) {
            return 1;
          } else if (age < 50) {
            return 2;
          } else if (age < 60) {
            return 3;
          } else if (age < 70) {
            return 4;
          } else if (age < 80) {
            return 5;
          } else if (age < 90) {
            return 6;
          }
        }
      },
      data: function() {
        return {
          update: 1,
          career_list: JSON.parse('[{"id":1,"label":"会计师","max_cr":70,"min_cr":30,"points":300,"skills":"会计，法律，图书馆，聆听，说服，侦查，任意其他两项个人或时代特长。","stat":"教育×4"},{"id":2,"label":"杂技演员","max_cr":20,"min_cr":9,"points":250,"skills":"攀爬，闪避，跳跃，投掷，侦查，游泳，任意两项其他个人或时代特长。","stat":"教育×2＋敏捷×2"},{"id":3,"label":"演员-戏剧演员","max_cr":40,"min_cr":9,"points":260,"skills":"技艺（表演），乔装，格斗，历史，两项社交技能（魅惑、话术、恐吓、说服），心理学，任意一项其他个人或时代特长。","stat":"教育×2＋外貌×2"},{"id":4,"label":"演员-电影演员","max_cr":90,"min_cr":20,"points":260,"skills":"技艺（表演），乔装，汽车驾驶，两项社交技能（魅惑、话术、恐吓、说服），心理学，任意两项其他个人或时代特长（如骑乘或格斗）。","stat":"教育×2＋外貌×2"},{"id":5,"label":"中介调查员","max_cr":45,"min_cr":20,"points":270,"skills":"一项社交技能（魅惑、话术、恐吓、说服），格斗（斗殴），射击，法律，图书馆，心理学，潜行，追踪。","stat":"教育×2＋力量或敏捷×2"},{"id":6,"label":"精神病医生（古典）","max_cr":60,"min_cr":10,"points":300,"skills":"法律，聆听，医学，外语，精神分析，心理学，科学（生物学，化学）。","stat":"教育×4"},{"id":7,"label":"动物训练师","max_cr":40,"min_cr":10,"points":260,"skills":"跳跃，聆听，博物学，心理学，科学（动物学），潜行，追踪，任意一项其他个人或时代特长。","stat":"教育×2＋外貌或意志×2"},{"id":8,"label":"文物学家（原作向）","max_cr":70,"min_cr":30,"points":300,"skills":"估价，技艺（任一），历史，图书馆，外语，一项社交技能（魅惑、话术、恐吓、说服），侦查，任意一项其他个人或时代特长。","stat":"教育×4"},{"id":9,"label":"古董商","max_cr":50,"min_cr":30,"points":300,"skills":"会计，估价，汽车驾驶，两项社交技能（魅惑、话术、恐吓、说服），历史，图书馆，导航。","stat":"教育×4"},{"id":10,"label":"考古学家（原作向）","max_cr":40,"min_cr":10,"points":300,"skills":"估价，考古，历史，外语，图书馆，侦查，机械维修，导航或科学（任一：如化学、物理、地理等）。","stat":"教育×4"},{"id":11,"label":"建筑师","max_cr":70,"min_cr":30,"points":300,"skills":"会计，技艺（技术制图），法律，母语，计算机或图书馆，说服，心理学，科学（数学）。","stat":"教育×4"},{"id":12,"label":"艺术家","max_cr":50,"min_cr":9,"points":250,"skills":"技艺（任一），历史或博物学，一项社交技能（魅惑、话术、恐吓、说服），外语，心理学，侦查，任意两项其他个人或时代特长。","stat":"教育×2＋敏捷或意志×2"},{"id":13,"label":"精神病院护工","max_cr":20,"min_cr":8,"points":270,"skills":"闪避，格斗（斗殴），急救，两项社交技能（魅惑、话术、恐吓、说服），聆听，心理学，潜行。","stat":"教育×2＋力量或敏捷×2"},{"id":14,"label":"运动员","max_cr":70,"min_cr":9,"points":270,"skills":"攀爬，跳跃，格斗（斗殴），骑乘，一项社交技能（魅惑、话术、恐吓、说服），游泳，投掷，任意一项其他个人或时代特长。","stat":"教育×2＋力量或敏捷×2"},{"id":15,"label":"作家（原作向）","max_cr":30,"min_cr":9,"points":300,"skills":"技艺（文学），历史，图书馆，博物学或神秘学，外语，母语，心理学，任意一项其他个人或时代特长。","stat":"教育×4"},{"id":16,"label":"酒保","max_cr":25,"min_cr":8,"points":260,"skills":"会计，两项社交技能（魅惑、话术、恐吓、说服），格斗（斗殴），聆听，心理学，侦查，任意一项其他个人或时代特长。","stat":"教育×2＋外貌×2"},{"id":17,"label":"猎人","max_cr":50,"min_cr":20,"points":270,"skills":"射击，聆听或侦查，博物学，导航，外语或生存（任一），科学（生物学或植物学），潜行，追踪。","stat":"教育×2＋力量或敏捷×2"},{"id":18,"label":"书商","max_cr":40,"min_cr":20,"points":300,"skills":"会计，估价，汽车驾驶，历史，图书馆，母语，外语，一项社交技能（魅惑、话术、恐吓、说服）。","stat":"教育×4"},{"id":19,"label":"赏金猎人","max_cr":30,"min_cr":9,"points":270,"skills":"汽车驾驶，电子学或电气维修，格斗或射击，一项社交技能（魅惑、话术、恐吓、说服），法律，心理学，追踪，潜行。","stat":"教育×2＋力量或敏捷×2"},{"id":20,"label":"拳击手、摔跤手","max_cr":60,"min_cr":9,"points":270,"skills":"闪避，格斗（斗殴），恐吓，跳跃，心理学，侦查，任意两项其他个人或时代特长。","stat":"教育×2＋力量×2"},{"id":21,"label":"管家、男仆、女仆","max_cr":40,"min_cr":9,"points":300,"skills":"会计或估价，技艺（任一：如烹饪、裁缝、理发），急救，聆听，外语，心理学，侦查，任意一项其他个人或时代特长。","stat":"教育×4"},{"id":22,"label":"神职人员","max_cr":60,"min_cr":9,"points":300,"skills":"会计，历史，图书馆，聆听，外语，一项社交技能（魅惑、话术、恐吓、说服），心理学，任意一项其他技能。","stat":"教育×4"},{"id":23,"label":"程序员、电子工程师","max_cr":70,"min_cr":10,"points":300,"skills":"计算机，电气维修，电子学、图书馆，科学（数学），侦查，任意两项其他个人或时代特长。","stat":"教育×4"},{"id":24,"label":"黑客/骇客","max_cr":70,"min_cr":10,"points":300,"skills":"计算机，电气维修，电子学，图书馆，侦查，一项社交技能（魅惑、话术、恐吓、说服），任意两项其他技能。","stat":"教育×4"},{"id":25,"label":"牛仔","max_cr":20,"min_cr":9,"points":270,"skills":"闪避，格斗或射击，急救或博物学，跳跃，骑乘，生存（任一），投掷，追踪。","stat":"教育×2＋力量或敏捷×2"},{"id":26,"label":"工匠","max_cr":40,"min_cr":10,"points":250,"skills":"会计，技艺（任二），机械维修，博物学，侦查，任意两项其他个人或时代特长。","stat":"教育×2＋敏捷×2"},{"id":27,"label":"罪犯-刺客","max_cr":60,"min_cr":30,"points":270,"skills":"乔装，电气维修，格斗，射击，锁匠，机械维修，潜行，心理学。","stat":"教育×2＋力量或敏捷×2"},{"id":28,"label":"罪犯-银行劫匪","max_cr":75,"min_cr":5,"points":270,"skills":"汽车驾驶，电气维修或机械维修，格斗，射击，恐吓，锁匠，操作重型机械，任意一项其他个人或时代特长。","stat":"教育×2＋力量或敏捷×2"},{"id":29,"label":"罪犯-打手、暴徒","max_cr":30,"min_cr":5,"points":270,"skills":"汽车驾驶，格斗，射击，两项社交技能（魅惑、话术、恐吓、说服），心理学，潜行，侦查。","stat":"教育×2＋力量×2"},{"id":30,"label":"罪犯-窃贼","max_cr":40,"min_cr":5,"points":250,"skills":"估价，攀爬，电气维修或机械维修，聆听，锁匠，妙手，潜行，侦查。","stat":"教育×2＋敏捷×2"},{"id":31,"label":"罪犯-欺诈师","max_cr":65,"min_cr":10,"points":260,"skills":"估价，技艺（表演），法律或外语，聆听，两项社交技能（魅惑、话术、恐吓、说服），心理学，妙手。","stat":"教育×2＋外貌×2"},{"id":32,"label":"罪犯-独行罪犯","max_cr":65,"min_cr":5,"points":260,"skills":"技艺（表演）或乔装，估价，一项社交技能（魅惑、话术、恐吓、说服），格斗或射击，锁匠或机械维修，潜行，心理学，侦查。","stat":"教育×2＋敏捷或外貌×2"},{"id":33,"label":"罪犯-女飞贼（古典）","max_cr":80,"min_cr":10,"points":260,"skills":"技艺（任意），两项社交技能（魅惑、话术、恐吓、说服），格斗（斗殴）或射击（手枪），汽车驾驶，聆听，潜行，任意一项其他个人或时代特长。","stat":"教育×2＋外貌×2"},{"id":34,"label":"罪犯-赃物贩子","max_cr":40,"min_cr":20,"points":260,"skills":"会计，估价，技艺（伪造），历史，一项社交技能（魅惑、话术、恐吓、说服），图书馆，侦查，任意一项其他技能。","stat":"教育×2＋外貌×2"},{"id":35,"label":"罪犯-赝造者","max_cr":60,"min_cr":20,"points":300,"skills":"会计，估价，技艺（伪造），历史，图书馆，侦查，妙手，任意一项其他个人或时代特长（如计算机）。","stat":"教育×4"},{"id":36,"label":"罪犯-走私者","max_cr":60,"min_cr":20,"points":260,"skills":"射击，聆听，导航，一项社交技能（魅惑、话术、恐吓、说服），汽车驾驶或驾驶（飞行器或船），心理学，妙手，侦查。","stat":"教育×2＋敏捷或外貌×2"},{"id":37,"label":"罪犯-混混","max_cr":10,"min_cr":3,"points":270,"skills":"攀爬，一项社交技能（魅惑、话术、恐吓、说服），格斗，射击，跳跃，妙手，潜行，投掷。","stat":"教育×2＋力量或敏捷×2"},{"id":38,"label":"教团首领","max_cr":60,"min_cr":30,"points":300,"skills":"会计，两项社交技能（魅惑、话术、恐吓、说服），神秘学，心理学，侦查，任意其他两项其他个人特长。","stat":"教育×4"},{"id":39,"label":"除魅师（现代）","max_cr":50,"min_cr":20,"points":300,"skills":"两项社交技能（魅惑、话术、恐吓、说服），汽车驾驶，格斗（斗殴）或射击，历史，神秘学，心理学，潜行。※经KP允许 可用催眠替换其中一项。","stat":"教育×4"},{"id":40,"label":"设计师","max_cr":60,"min_cr":20,"points":300,"skills":"会计，技艺（摄影），技艺（任一），计算机或图书馆，机械维修，心理学，侦查，任意一项其他个人特长。","stat":"教育×4"},{"id":41,"label":"业余艺术爱好者（原作向）","max_cr":99,"min_cr":50,"points":260,"skills":"技艺（任一），射击，外语，骑乘，一项社交技能（魅惑、话术、恐吓、说服），任意三项其他个人或时代特长。","stat":"教育×2＋外貌×2"},{"id":42,"label":"潜水员","max_cr":30,"min_cr":9,"points":250,"skills":"潜水，急救，机械维修，驾驶（船），科学（生物），侦查，游泳，任意一项其他个人或时代特长。","stat":"教育×2＋敏捷×2"},{"id":43,"label":"医生（原作向）","max_cr":80,"min_cr":30,"points":300,"skills":"急救、医学、外语（拉丁文）、心理学、科学（生物学，制药），任两种其他学术或个人特长。","stat":"教育×4"},{"id":44,"label":"流浪者","max_cr":5,"min_cr":0,"points":270,"skills":"攀爬，跳跃，聆听，导航，一项社交技能（魅惑、话术、恐吓、说服），潜行，任意两项其他个人或时代特长。","stat":"教育×2＋外貌或敏捷或力量×2"},{"id":45,"label":"司机-私人司机","max_cr":40,"min_cr":10,"points":250,"skills":"汽车驾驶，两项社交技能（魅惑、话术、恐吓、说服），聆听，机械维修，导航，侦查，任意一项其他个人或时代特长。","stat":"教育×2＋敏捷×2"},{"id":46,"label":"司机-司机","max_cr":20,"min_cr":9,"points":270,"skills":"会计，汽车驾驶，聆听，一项社交技能（魅惑、话术、恐吓、说服），机械维修，导航，心理学，任意一项其他个人或时代特长。","stat":"教育×2＋力量或敏捷×2"},{"id":47,"label":"司机-出租车司机","max_cr":30,"min_cr":9,"points":250,"skills":"会计，汽车驾驶，电气维修，话术，机械维修，导航，侦查，任意一项其他个人或时代特长。","stat":"教育×2＋敏捷×2"},{"id":48,"label":"编辑","max_cr":30,"min_cr":10,"points":300,"skills":"会计，历史，母语，两项社交技能（魅惑、话术、恐吓、说服），心理学，侦查，任意一项其他个人或时代特长。","stat":"教育×4"},{"id":49,"label":"政府官员","max_cr":90,"min_cr":50,"points":260,"skills":"魅惑，历史，恐吓，话术，聆听，母语，说服，心理学。","stat":"教育×2＋外貌×2"},{"id":50,"label":"工程师","max_cr":60,"min_cr":30,"points":300,"skills":"技艺（技术制图），电气维修，图书馆，机械维修，操作重型机械，科学（工程学，物理），任意一项其他个人或时代特长。","stat":"教育×4"},{"id":51,"label":"艺人","max_cr":70,"min_cr":9,"points":260,"skills":"技艺（表演类，如表演、演唱、喜剧等），乔装，两项社交技能（魅惑、话术、恐吓、说服），聆听，心理学，任意两项其他个人或时代特长。","stat":"教育×2＋外貌×2"},{"id":52,"label":"探险家（古典）","max_cr":80,"min_cr":55,"points":270,"skills":"攀爬或游泳，射击，历史，跳跃，博物学，导航，外语，生存。","stat":"教育×2＋外貌或敏捷或力量×2"},{"id":53,"label":"农民","max_cr":30,"min_cr":9,"points":270,"skills":"技艺（耕作），汽车驾驶（或运货马车），一项社交技能（魅惑、话术、恐吓、说服），机械维修，博物学，操作重型机械，追踪，任意一项其他个人或时代特长","stat":"教育×2＋力量或敏捷×2"},{"id":54,"label":"司法人员","max_cr":40,"min_cr":20,"points":300,"skills":"汽车驾驶，格斗（斗殴），射击，法律，说服，潜行，侦查，任意一项其他个人或时代特长。","stat":"教育×4"},{"id":55,"label":"消防员","max_cr":30,"min_cr":9,"points":270,"skills":"攀爬，闪避，汽车驾驶，急救，跳跃，机械维修，操作重型机械，投掷。","stat":"教育×2＋力量或敏捷×2"},{"id":56,"label":"驻外记者","max_cr":40,"min_cr":10,"points":300,"skills":"历史，外语，母语，聆听，两项社交技能（魅惑、话术、恐吓、说服），心理学，任意一项其他个人或时代特长。","stat":"教育×4"},{"id":57,"label":"法医","max_cr":60,"min_cr":40,"points":300,"skills":"外语（拉丁文），图书馆，医学，说服，科学（生物学，鉴证，制药），侦查。","stat":"教育×4"},{"id":58,"label":"赌徒","max_cr":50,"min_cr":8,"points":260,"skills":"会计，技艺（表演），两项社交技能（魅惑、话术、恐吓、说服），聆听，心理学，妙手，侦查。","stat":"教育×2＋敏捷或外貌×2"},{"id":59,"label":"黑帮-黑帮老大","max_cr":95,"min_cr":60,"points":260,"skills":"格斗，射击，法律，聆听，两项社交技能（魅惑、话术、恐吓、说服），心理学，侦查。","stat":"教育×2＋外貌×2"},{"id":60,"label":"黑帮-马仔","max_cr":20,"min_cr":9,"points":270,"skills":"汽车驾驶，格斗，射击，两项社交技能（魅惑、话术、恐吓、说服），心理学，任意两项其他个人或时代特长。","stat":"教育×2＋力量或敏捷×2"},{"id":61,"label":"绅士、淑女","max_cr":90,"min_cr":40,"points":260,"skills":"技艺（任一），两项社交技能（魅惑、话术、恐吓、说服），射击（步枪/霰弹枪），历史，外语（任一），导航，骑乘。","stat":"教育×2＋外貌×2"},{"id":62,"label":"游民","max_cr":5,"min_cr":0,"points":260,"skills":"技艺（任一），攀爬，跳跃，聆听，锁匠或妙手，导航，潜行，任意一项其他个人或时代特长。","stat":"教育×2＋敏捷或外貌×2"},{"id":63,"label":"勤杂护工","max_cr":15,"min_cr":6,"points":270,"skills":"电气维修，一项社交技能（魅惑、话术、恐吓、说服），格斗（斗殴），急救，聆听，机械维修，心理学，潜行。","stat":"教育×2＋力量×2"},{"id":64,"label":"记者(原作向)-调查记者","max_cr":30,"min_cr":9,"points":300,"skills":"技艺（艺术或摄影），一项社交技能（魅惑、话术、恐吓、说服），历史，图书馆，母语，心理学，任意两项其他个人或时代特长。","stat":"教育×4"},{"id":65,"label":"记者(原作向)-通讯记者","max_cr":30,"min_cr":9,"points":300,"skills":"技艺（表演），历史，聆听，母语，一项社交技能（魅惑、话术、恐吓、说服），心理学，潜行，侦查。","stat":"教育×4"},{"id":66,"label":"法官","max_cr":80,"min_cr":50,"points":300,"skills":"历史，恐吓，法律，图书馆，聆听，母语，说服，心理学。","stat":"教育×4"},{"id":67,"label":"实验室助理","max_cr":30,"min_cr":10,"points":300,"skills":"计算机或图书馆，电气维修，外语，科学（化学和任意两项），侦查，任意一项其他个人特长。","stat":"教育×4"},{"id":68,"label":"工人-非熟练工人","max_cr":30,"min_cr":9,"points":270,"skills":"汽车驾驶，电气维修，格斗，急救，机械维修，操作重型机械，投掷，任意一项其他个人或时代特长。","stat":"教育×2＋力量或敏捷×2"},{"id":69,"label":"工人-伐木工","max_cr":30,"min_cr":9,"points":270,"skills":"攀爬，闪避，格斗（链锯），急救，跳跃，机械维修，博物学或科学（生物学或植物学），投掷。","stat":"教育×2＋力量或敏捷×2"},{"id":70,"label":"工人-矿工","max_cr":30,"min_cr":9,"points":270,"skills":"攀爬，科学（地质），跳跃，机械维修，操作重型机械，潜行，侦查，任意一项其他个人或时代特长。","stat":"教育×2＋力量或敏捷×2"},{"id":71,"label":"律师","max_cr":80,"min_cr":30,"points":300,"skills":"会计，法律，图书馆，两项社交技能（魅惑、话术、恐吓、说服），心理学，两项其他技能。","stat":"教育×4"},{"id":72,"label":"图书馆管理员（原作向）","max_cr":35,"min_cr":9,"points":300,"skills":"会计，图书馆，外语，母语，任意四项其他个人特长或专业书籍主题。","stat":"教育×4"},{"id":73,"label":"技师","max_cr":40,"min_cr":9,"points":300,"skills":"技艺（木工、焊接、管道工等），攀爬，汽车驾驶，电气维修，机械维修，操作重型机械，任意两项其他个人或时代或技术特长。","stat":"教育×4"},{"id":74,"label":"军官","max_cr":70,"min_cr":20,"points":270,"skills":"会计，射击，导航，急救，两项社交技能（魅惑、话术、恐吓、说服），心理学，任意一项其他个人或时代特长。","stat":"教育×2＋力量或敏捷×2"},{"id":75,"label":"传教士","max_cr":30,"min_cr":0,"points":260,"skills":"技艺（任一），急救，机械维修，医学，博物学，一项社交技能（魅惑、话术、恐吓、说服），任意两项其他个人或时代特长。","stat":"教育×2＋外貌×2"},{"id":76,"label":"登山家","max_cr":60,"min_cr":30,"points":270,"skills":"攀爬，急救，跳跃，聆听，导航，外语，生存（阿尔卑斯或类似），追踪。","stat":"教育×2＋力量或敏捷×2"},{"id":77,"label":"博物馆管理员","max_cr":30,"min_cr":10,"points":300,"skills":"会计，估价，考古，历史，图书馆，神秘学，外语，侦查。","stat":"教育×4"},{"id":78,"label":"音乐家","max_cr":30,"min_cr":9,"points":250,"skills":"技艺（乐器），一项社交技能（魅惑、话术、恐吓、说服），聆听，心理学，四项其他技能。","stat":"教育×2＋敏捷或意志×2"},{"id":79,"label":"护士","max_cr":30,"min_cr":9,"points":300,"skills":"急救，聆听，医学，一项社交技能（魅惑、话术、恐吓、说服），心理学，科学（生物学，化学），侦查。","stat":"教育×4"},{"id":80,"label":"神秘学家","max_cr":65,"min_cr":9,"points":300,"skills":"人类学，历史，图书馆，一项社交技能（魅惑、话术、恐吓、说服），神秘学，外语，科学（天文），任意一项其他个人或时代特长 ※经KP允许 可以包含克苏鲁神话","stat":"教育×4"},{"id":81,"label":"旅行家","max_cr":20,"min_cr":5,"points":270,"skills":"射击，急救，聆听，博物学，导航，侦查，生存（任一），追踪。","stat":"教育×2＋力量或敏捷×2"},{"id":82,"label":"超心理学家","max_cr":30,"min_cr":9,"points":300,"skills":"人类学，技艺（摄影），历史，图书馆，神秘学，外语，心理学，任意一项其他个人或时代特长。","stat":"教育×4"},{"id":83,"label":"药剂师","max_cr":75,"min_cr":35,"points":300,"skills":"会计，急救，外语（拉丁文），图书馆，一项社交技能（魅惑、话术、恐吓、说服），心理学，科学（制药，化学）。","stat":"教育×4"},{"id":84,"label":"摄影师-摄影师","max_cr":30,"min_cr":9,"points":300,"skills":"技艺（摄影），一项社交技能（魅惑、话术、恐吓、说服），心理学，科学（化学），潜行，侦查，任意两项其他个人或时代特长。","stat":"教育×4"},{"id":85,"label":"摄影师-摄影记者","max_cr":30,"min_cr":10,"points":300,"skills":"技艺（摄影），攀爬，一项社交技能（魅惑、话术、恐吓、说服），外语，心理学，科学（化学），任意两项其他个人或时代特长。","stat":"教育×4"},{"id":86,"label":"飞行员-飞行员","max_cr":70,"min_cr":20,"points":250,"skills":"电气维修，机械维修，导航，操作重型机械，驾驶（飞行器），科学（天文），任意两项其他个人或时代特长。","stat":"教育×2＋敏捷×2"},{"id":87,"label":"飞行员-特技飞行员（古典）","max_cr":60,"min_cr":30,"points":300,"skills":"会计，电气维修，聆听，机械维修，导航，驾驶（飞行器），侦查，任意一项其他个人或时代特长。","stat":"教育×4"},{"id":88,"label":"警方(原作向)-警探","max_cr":50,"min_cr":20,"points":270,"skills":"技艺（表演）或乔装，射击，法律，聆听，一项社交技能（魅惑、话术、恐吓、说服），心理学，侦查，一项其他技能。","stat":"教育×2＋力量或敏捷×2"},{"id":89,"label":"警方(原作向)-巡警","max_cr":30,"min_cr":9,"points":270,"skills":"格斗（斗殴），射击，急救，一项社交技能（魅惑、话术、恐吓、说服），法律，心理学，侦查和下面的一种个人特长：汽车驾驶或骑乘。","stat":"教育×2＋力量或敏捷×2"},{"id":90,"label":"私家侦探","max_cr":30,"min_cr":9,"points":270,"skills":"技艺（摄影），乔装，法律，图书馆，一项社交技能（魅惑、话术、恐吓、说服），心理学，侦查，一项其他个人或时代特长（如计算机、锁匠、格斗、射击）。","stat":"教育×2＋力量或敏捷×2"},{"id":91,"label":"教授（原作向）","max_cr":70,"min_cr":20,"points":300,"skills":"图书馆，外语，母语，心理学，任意四项其他学术、时代或个人特长。","stat":"教育×4"},{"id":92,"label":"淘金客","max_cr":10,"min_cr":0,"points":270,"skills":"攀爬、急救、历史、机械维修、导航、科学（地质），侦查，任意一项其他个人或时代特长。","stat":"教育×2＋力量或敏捷×2"},{"id":93,"label":"性工作者","max_cr":50,"min_cr":5,"points":260,"skills":"技艺（任一），两项社交技能（魅惑、话术、恐吓、说服），闪避，心理学，妙手，潜行，任意一项其他个人或时代特长。","stat":"教育×2＋外貌×2"},{"id":94,"label":"精神病学家","max_cr":80,"min_cr":30,"points":300,"skills":"外语，聆听，医学，说服，精神分析，心理学，科学（生物学，化学）。","stat":"教育×4"},{"id":95,"label":"心理学家、精神分析学家","max_cr":40,"min_cr":10,"points":300,"skills":"会计，图书馆，聆听，说服，精神分析，心理学，任意两项其他学术、个人或时代特长。","stat":"教育×4"},{"id":96,"label":"研究员","max_cr":30,"min_cr":9,"points":300,"skills":"历史，图书馆，一项社交技能（魅惑、话术、恐吓、说服），外语，侦查，任意三项其他学术领域。","stat":"教育×4"},{"id":97,"label":"海员-军舰海员","max_cr":30,"min_cr":9,"points":300,"skills":"电工或机械维修，格斗，射击，急救，导航，驾驶（船），生存（海上），游泳。","stat":"教育×4"},{"id":98,"label":"海员-民船海员","max_cr":40,"min_cr":20,"points":300,"skills":"急救，机械维修，博物学，导航，一项社交技能（魅惑、话术、恐吓、说服），驾驶（船），侦查，游泳。","stat":"教育×4"},{"id":99,"label":"推销员","max_cr":40,"min_cr":9,"points":260,"skills":"会计，两项社交技能（魅惑、话术、恐吓、说服），汽车驾驶，聆听，心理学，潜行或妙手，一项其他技能。","stat":"教育×2＋外貌×2"},{"id":100,"label":"科学家","max_cr":50,"min_cr":9,"points":300,"skills":"任意三项科学专业领域，计算机或图书馆，外语，母语，一项社交技能（魅惑、话术、恐吓、说服），侦查。","stat":"教育×4"},{"id":101,"label":"秘书","max_cr":30,"min_cr":9,"points":260,"skills":"会计，技艺（打字或速记），两项社交技能（魅惑、话术、恐吓、说服），母语，图书馆或计算机，心理学，任意一项其他个人或时代特长。","stat":"教育×2＋敏捷或外貌×2"},{"id":102,"label":"店老板","max_cr":40,"min_cr":20,"points":260,"skills":"会计，两项社交技能（魅惑、话术、恐吓、说服），电气维修，聆听，机械维修，心理学，侦查。","stat":"教育×2＋敏捷或外貌×2"},{"id":103,"label":"士兵、海军陆战队士兵","max_cr":30,"min_cr":9,"points":270,"skills":"攀爬或游泳，闪避，格斗，射击，潜行，生存，下面任选两项：急救、机械维修、外语。","stat":"教育×2＋力量或敏捷×2"},{"id":104,"label":"间谍","max_cr":60,"min_cr":20,"points":260,"skills":"技艺（表演）或乔装，射击，聆听，外语，一项社交技能（魅惑、话术、恐吓、说服），心理学，妙手，潜行。","stat":"教育×2＋敏捷或外貌×2"},{"id":105,"label":"学生、实习生","max_cr":10,"min_cr":5,"points":300,"skills":"语言（母语或外语），图书馆，聆听，三个学习的专业，任意两项其他个人或时代特长。","stat":"教育×4"},{"id":106,"label":"替身演员","max_cr":50,"min_cr":10,"points":270,"skills":"攀爬，闪避，电气维修或机械维修，格斗，急救，跳跃，游泳，下面任选一项：潜水、汽车驾驶、驾驶（任一），骑乘。","stat":"教育×2＋力量或敏捷×2"},{"id":107,"label":"部落成员","max_cr":15,"min_cr":0,"points":270,"skills":"攀爬，格斗或投掷，聆听，博物学，神秘学，侦查，游泳，生存（任一）。","stat":"教育×2＋力量或敏捷×2"},{"id":108,"label":"殡葬师","max_cr":40,"min_cr":20,"points":300,"skills":"会计，汽车驾驶，一项社交技能（魅惑、话术、恐吓、说服），历史，神秘学，心理学，科学（生物学，化学）。","stat":"教育×4"},{"id":109,"label":"工会活动家","max_cr":50,"min_cr":5,"points":300,"skills":"会计，两项社交技能（魅惑、话术、恐吓、说服），格斗（斗殴），法律，聆听，操作重型机械，心理学。","stat":"教育×4"},{"id":110,"label":"服务生","max_cr":20,"min_cr":9,"points":260,"skills":"会计，技艺（任一），闪避，聆听，两项社交技能（魅惑、话术、恐吓、说服），心理学，任意一项其他个人或时代特长。","stat":"教育×2＋敏捷或外貌×2"},{"id":111,"label":"白领工人-职员、主管","max_cr":20,"min_cr":9,"points":300,"skills":"会计，语言，法律，图书馆或计算机，聆听，一项社交技能（魅惑、话术、恐吓、说服），任意两项其他个人或时代特长。","stat":"教育×4"},{"id":112,"label":"白领工人-中高层管理人员","max_cr":80,"min_cr":20,"points":300,"skills":"会计，外语，法律，两项社交技能（魅惑、话术、恐吓、说服），心理学，任意两项其他个人或时代特长。","stat":"教育×4"},{"id":113,"label":"狂热者","max_cr":30,"min_cr":0,"points":260,"skills":"历史，两项社交技能（魅惑、话术、恐吓、说服），心理学，潜行，任意三项其他个人或时代特长。","stat":"教育×2＋外貌或意志×2"},{"id":114,"label":"饲养员","max_cr":40,"min_cr":9,"points":300,"skills":"驯兽，会计，闪避，急救，博物学，医学，科学（制药，动物学）。","stat":"教育×4"},{"id":115,"label":"商人","max_cr":80,"min_cr":40,"points":300,"skills":"会计；讨价还价；信誉；快速交谈；任意一门外语（玩家选择）；说服；自选一个个人或时代技能。","stat":"教育×4"},{"id":116,"label":"政客","max_cr":90,"min_cr":50,"points":300,"skills":"信誉；快速交谈；法律；说服；任选三个个人或时代技能。","stat":"教育×4"}]'),
          skill_list: JSON.parse('[{"basic":5,"label":"会计"},{"basic":1,"label":"人类学"},{"basic":5,"label":"估价"},{"basic":1,"label":"考古学"},{"basic":15,"label":"魅惑"},{"basic":20,"label":"攀爬"},{"basic":5,"label":"计算机使用"},{"basic":0,"label":"信用评级"},{"basic":0,"label":"克苏鲁神话"},{"basic":5,"label":"乔装"},{"basic":25,"label":"闪避"},{"basic":20,"label":"汽车驾驶"},{"basic":10,"label":"电气维修"},{"basic":1,"label":"电子学"},{"basic":5,"label":"话术"},{"basic":30,"label":"急救"},{"basic":5,"label":"历史"},{"basic":15,"label":"恐吓"},{"basic":20,"label":"跳跃"},{"basic":5,"label":"法律"},{"basic":20,"label":"图书馆使用"},{"basic":20,"label":"聆听"},{"basic":1,"label":"锁匠"},{"basic":10,"label":"机械维修"},{"basic":1,"label":"医学"},{"basic":10,"label":"博物学"},{"basic":10,"label":"领航"},{"basic":5,"label":"神秘学"},{"basic":1,"label":"操作重型机械"},{"basic":10,"label":"说服"},{"basic":1,"label":"精神分析"},{"basic":10,"label":"心理学"},{"basic":5,"label":"骑术"},{"basic":10,"label":"妙手"},{"basic":25,"label":"侦查"},{"basic":20,"label":"潜行"},{"basic":20,"label":"游泳"},{"basic":20,"label":"投掷"},{"basic":10,"label":"追踪"},{"basic":1,"label":"潜水"},{"basic":5,"label":"技艺: 表演"},{"basic":5,"label":"技艺: 美术"},{"basic":5,"label":"技艺: 摄影"},{"basic":5,"label":"技艺: 伪造文书"},{"basic":5,"label":"技艺: 写作"},{"basic":5,"label":"技艺: 书法"},{"basic":5,"label":"技艺: 音乐"},{"basic":5,"label":"技艺: 厨艺"},{"basic":5,"label":"技艺: 表演"},{"basic":5,"label":"技艺: 理发"},{"basic":5,"label":"技艺: 木匠"},{"basic":5,"label":"技艺: 舞蹈"},{"basic":5,"label":"技艺: 莫里斯舞蹈"},{"basic":5,"label":"技艺: 歌剧演唱"},{"basic":5,"label":"技艺: 粉刷/油漆工"},{"basic":5,"label":"技艺: 制陶"},{"basic":5,"label":"技艺: 雕塑"},{"basic":1,"label":"科学: 地质学"},{"basic":1,"label":"科学: 化学"},{"basic":1,"label":"科学: 生物学"},{"basic":10,"label":"科学: 数学"},{"basic":1,"label":"科学: 天文学"},{"basic":1,"label":"科学: 物理学"},{"basic":1,"label":"科学: 药学"},{"basic":1,"label":"科学: 植物学"},{"basic":1,"label":"科学: 动物学"},{"basic":1,"label":"科学: 密码学"},{"basic":1,"label":"科学: 工程学"},{"basic":1,"label":"科学: 气象学"},{"basic":1,"label":"科学: 司法科学"},{"basic":5,"label":"格斗: 鞭子"},{"basic":10,"label":"格斗: 电锯"},{"basic":25,"label":"格斗: 斗殴"},{"basic":15,"label":"格斗: 斧"},{"basic":20,"label":"格斗: 剑"},{"basic":15,"label":"格斗: 绞索"},{"basic":10,"label":"格斗: 链枷"},{"basic":20,"label":"格斗: 矛"},{"basic":25,"label":"射击: 步枪/霰弹枪"},{"basic":15,"label":"射击: 冲锋枪"},{"basic":15,"label":"射击: 弓"},{"basic":10,"label":"射击: 火焰喷射器"},{"basic":10,"label":"射击: 机枪"},{"basic":20,"label":"射击: 手枪"},{"basic":10,"label":"射击: 重武器"},{"basic":1,"label":"非常规技能: 爆破"},{"basic":1,"label":"非常规技能: 催眠"},{"basic":1,"label":"非常规技能: 读唇"},{"basic":1,"label":"非常规技能: 炮术"},{"basic":1,"label":"非常规技能: 潜水"},{"basic":5,"label":"非常规技能: 驯兽"},{"basic":1,"label":"驾驶: 飞行器"},{"basic":1,"label":"驾驶: 船"},{"basic":5,"label":"同道求援"},{"basic":1,"label":"梦示"},{"basic":10,"label":"迷惑"},{"basic":5,"label":"拷问"},{"basic":0,"label":"恶名值"}]'),
          stat_label: ['力量/STR', '体质/CON', '体型/SIZ', '敏捷/DEX', '外貌/APP', '教育/EDU', '智力/INT', '意志/POW', '幸运/Luck'],
          debuff_text: ['力量体型合计-5，EDU-5', '无', '力量体质敏捷合计-5，外貌-5', '力量体质敏捷合计-10，外貌-10', '力量体质敏捷合计-20，外貌-15', '力量体质敏捷合计-40，外貌-20', '力量体质敏捷合计-80，外貌-25'],
          form: {
            lang: [{label: "", career: 0, interest: 0}, {label: "", career: 0, interest: 0}, {label: "", career: 0, interest: 0}, {label: "", career: 0, interest: 0}],
            era: 2,
            stat: [0, 0, 0, 0, 0, 0, 0, 0, 0],
            diy_stat: false,
            name: "",
            player_name: "",
            age: 20,
            gender: 1,
            career: 1,
            address: "",
            from: "",
            bg: ["", "", "", "", "", "", "", ""],
            item: ["", "", "", "", "", "", "", ""],
          },
          debuff: {
            str: 0,
            con: 0,
            siz: 0,
            dex: 0
          },
          career_points: [],
          interest_points: [],
          era_list: [
            {value: 1, label: "1890s"},
            {value: 2, label: "1920s"},
            {value: 3, label: "现代"}
          ],
          gender_list: [
            {value: 1, label: "男"},
            {value: 2, label: "女"}
          ],
        }
      },
      created: function() {
        this.roll_stat();
        for (var i = 0; i < this.skill_list.length; i++) {
          this.career_points.push(0);
          this.interest_points.push(0);
        }
      },
      methods: {
        roll(times, max) {
          let value = 0;
          for (var i = 0; i < times; i++) {
            let r = Math.ceil(Math.random() * max);
            value += r;
          }
          return value;
        },
        roll_stat() {
          for (var i = 0; i < 9; i++) {
            if (i == 2 || i == 6 || i == 5) {
              this.form.stat[i] = (this.roll(2, 6) + 6) * 5;
            } else {
              this.form.stat[i] = this.roll(3, 6) * 5;
            }
          }
          this.form.stat.push(0);
          this.form.stat.pop();
        },
        sum(v) {
          let s = 0;
          for (var i = 0; i < v.length; i++) {
            s += parseInt(v[i]);
          }
          return s;
        },
        get_skill_point() {
          let str = this.stat[0];
          let con = this.stat[1];
          let siz = this.stat[2];
          let dex = this.stat[3];
          let app = this.stat[4];
          let edu = this.stat[5];
          let int = this.stat[6];
          let pow = this.stat[7];
          return eval(this.reg_stat(this.career_list[this.form.career - 1].stat))
        },
        reg_stat(v) {
          let arr = v.split('＋');
          if (arr.length == 2) {
            return this.reg_statm(arr[0]) + "+" + this.reg_statm(arr[1]);
          } else {
            return this.reg_statm(arr[0]);
          }
        },
        reg_statm(v) {
          let vr = v.replace('力量', 'str').replace('体质', 'con').replace('体型', 'siz').replace('敏捷', 'dex').replace('外貌', 'app').replace('教育', 'edu').replace('智力', 'int').replace('意志', 'pow');
          let n = parseInt(vr[vr.length - 1]);
          vr = vr.substr(0, vr.length - 2);
          let arr = vr.split('或');
          let max = 0;
          str = "Math.max(";
          for (let elem of arr) {
            str += elem + ", "
          }
          str += ")"
          return str + " * " + n;
        },
        update_data() {
          let str = JSON.stringify(this.form);
          let data = JSON.parse(str);
          data.stats = this.table_data[0];
          data.skills = JSON.parse(JSON.stringify(this.skills));
          for (let i = 0; i <= 3; i++) {
            data.skills.push({
              basic: (i == 0) ? this.stat[5] : 1,
              label: "语言: " + this.form.lang[i].label,
              sum: parseInt(this.form.lang[i].career) + parseInt(this.form.lang[i].interest) + ((i == 0) ? this.stat[5] : 1)
            })
          }
          delete data.lang;
          delete data.diy_stat;
          delete data.stat;
          return data;
        },
        commit() {
          let f = this.form;
          let check1 = !f.name || !f.player_name || !f.career || !f.age || !f.gender || !f.address || !f.from;
          let check2 = false;
          for (let i = 0; i < 6; i++) {
            check2 = check2 || !f.bg[i]
          }
          if (check1 || check2 || !f.lang[0].label) {
            this.$message.error("必填项未填写");
            return;
          }
          if (this.skills[7].sum > this.career_list[this.form.career - 1].max_cr || this.skills[7].sum < this.career_list[this.form.career - 1].min_cr) {
            this.$message.error("信用评级范围有误");
            return;
          }
          let debuff_arr = [5, 0, 5, 10, 20, 40, 80];
          if (parseInt(this.debuff.str) + parseInt(this.debuff.con) + parseInt(this.debuff.siz) + parseInt(this.debuff.dex) != debuff_arr[this.age_level]) {
            this.$message.error("能力减值未分配完毕");
            return;
          }
          axios.post('http://47.100.50.175:25565/insert', this.update_data())
          .then(() => {
            this.$message.success("提交成功");
            window.location.reload();
          })
          .catch(function (error) {
            this.$message.error("提交失败");
          });
        }
      }
    })
  </script>
</html>